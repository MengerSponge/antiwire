// Make a 3d-printable file using OpenSCAD and comsol-determined wire paths
// ARR 2021.03.15
// template adapted from Lucas et al https://doi.org/10.1090/noti2187
// input files
use <list-comprehension/sweep.scad>
use <scad-utils/shapes.scad>
// choose start and end datapoints
step = 1;
start = 0;
end = 399;
// style and size parameters
radius = 0.5;
sides = 16;
function shape() =
circle(radius, $fn=sides);
// overall scale applied before the tubular polyhedron is constructed
scale = 1;
points = [
[0.000000,0.000000,10.000000],
[0.062864,0.003965,10.000000],
[0.124980,0.015829,10.000000],
[0.185604,0.035497,10.000000],
[0.244002,0.062813,10.000000],
[0.299455,0.097560,10.000000],
[0.351264,0.139459,10.000000],
[0.398754,0.188177,10.000000],
[0.441278,0.243319,10.000000],
[0.478222,0.304440,10.000000],
[0.509011,0.371044,10.000000],
[0.533109,0.442584,10.000000],
[0.550028,0.518470,10.000000],
[0.559326,0.598070,10.000000],
[0.560613,0.680715,10.000000],
[0.553556,0.765701,10.000000],
[0.537876,0.852296,10.000000],
[0.513357,0.939743,10.000000],
[0.479842,1.027264,10.000000],
[0.437239,1.114067,10.000000],
[0.385520,1.199348,10.000000],
[0.324722,1.282299,10.000000],
[0.254949,1.362111,10.000000],
[0.176370,1.437979,10.000000],
[0.089220,1.509109,10.000000],
[-0.006199,1.574721,10.000000],
[-0.109525,1.634056,10.000000],
[-0.220328,1.686380,10.000000],
[-0.338120,1.730987,10.000000],
[-0.462355,1.767209,10.000000],
[-0.592427,1.794414,10.000000],
[-0.727680,1.812015,10.000000],
[-0.867405,1.819474,10.000000],
[-1.010848,1.816304,10.000000],
[-1.157212,1.802074,10.000000],
[-1.305657,1.776411,10.000000],
[-1.455315,1.739006,10.000000],
[-1.605281,1.689614,10.000000],
[-1.754629,1.628058,10.000000],
[-1.902411,1.554231,10.000000],
[-2.047665,1.468099,10.000000],
[-2.189418,1.369699,10.000000],
[-2.326693,1.259143,10.000000],
[-2.458514,1.136619,10.000000],
[-2.583911,1.002389,10.000000],
[-2.701928,0.856790,10.000000],
[-2.811624,0.700233,10.000000],
[-2.912086,0.533204,10.000000],
[-3.002425,0.356259,10.000000],
[-3.081790,0.170027,10.000000],
[-3.149369,-0.024798,10.000000],
[-3.204393,-0.227454,10.000000],
[-3.246147,-0.437118,10.000000],
[-3.273966,-0.652907,10.000000],
[-3.287249,-0.873884,10.000000],
[-3.285457,-1.099059,10.000000],
[-3.268117,-1.327395,10.000000],
[-3.234831,-1.557813,10.000000],
[-3.185274,-1.789196,10.000000],
[-3.119199,-2.020398,10.000000],
[-3.036441,-2.250241,10.000000],
[-2.936918,-2.477531,10.000000],
[-2.820633,-2.701055,10.000000],
[-2.687675,-2.919593,10.000000],
[-2.538223,-3.131923,10.000000],
[-2.372543,-3.336822,10.000000],
[-2.190989,-3.533083,10.000000],
[-1.994006,-3.719509,10.000000],
[-1.782125,-3.894929,10.000000],
[-1.555964,-4.058199,10.000000],
[-1.316227,-4.208213,10.000000],
[-1.063701,-4.343903,10.000000],
[-0.799254,-4.464249,10.000000],
[-0.523831,-4.568286,10.000000],
[-0.238451,-4.655107,10.000000],
[0.055794,-4.723870,10.000000],
[0.357747,-4.773803,10.000000],
[0.666189,-4.804209,10.000000],
[0.979844,-4.814470,10.000000],
[1.297383,-4.804054,10.000000],
[1.617432,-4.772516,10.000000],
[1.938576,-4.719503,10.000000],
[2.259367,-4.644758,10.000000],
[2.578327,-4.548121,10.000000],
[2.893959,-4.429534,10.000000],
[3.204752,-4.289041,10.000000],
[3.509186,-4.126789,10.000000],
[3.805743,-3.943032,10.000000],
[4.092910,-3.738129,10.000000],
[4.369192,-3.512543,10.000000],
[4.633113,-3.266845,10.000000],
[4.883227,-3.001708,10.000000],
[5.118125,-2.717910,10.000000],
[5.336442,-2.416328,10.000000],
[5.536864,-2.097938,10.000000],
[5.718134,-1.763811,10.000000],
[5.879062,-1.415110,10.000000],
[6.018528,-1.053087,10.000000],
[6.135488,-0.679076,10.000000],
[6.228986,-0.294489,10.000000],
[6.298152,0.099187,10.000000],
[6.342212,0.500399,10.000000],
[6.360493,0.907532,10.000000],
[6.352426,1.318915,10.000000],
[6.317551,1.732832,10.000000],
[6.255521,2.147523,10.000000],
[6.166104,2.561197,10.000000],
[6.049189,2.972036,10.000000],
[5.904784,3.378204,10.000000],
[5.733020,3.777856,10.000000],
[5.534154,4.169145,10.000000],
[5.308565,4.550232,10.000000],
[5.056761,4.919293,10.000000],
[4.779369,5.274525,10.000000],
[4.477145,5.614162,10.000000],
[4.150963,5.936476,10.000000],
[3.801818,6.239788,10.000000],
[3.430821,6.522476,10.000000],
[3.039198,6.782986,10.000000],
[2.628284,7.019835,10.000000],
[2.199519,7.231622,10.000000],
[1.754443,7.417033,10.000000],
[1.294691,7.574850,10.000000],
[0.821987,7.703960,10.000000],
[0.338137,7.803354,10.000000],
[-0.154977,7.872140,10.000000],
[-0.655404,7.909547,10.000000],
[-1.161134,7.914928,10.000000],
[-1.670106,7.887763,10.000000],
[-2.180211,7.827671,10.000000],
[-2.689308,7.734403,10.000000],
[-3.195228,7.607854,10.000000],
[-3.695787,7.448059,10.000000],
[-4.188790,7.255197,10.000000],
[-4.672047,7.029594,10.000000],
[-5.143377,6.771720,10.000000],
[-5.600622,6.482190,10.000000],
[-6.041654,6.161765,10.000000],
[-6.464384,5.811348,10.000000],
[-6.866776,5.431984,10.000000],
[-7.246852,5.024856,10.000000],
[-7.602703,4.591280,10.000000],
[-7.932499,4.132706,10.000000],
[-8.234496,3.650707,10.000000],
[-8.507046,3.146979,10.000000],
[-8.748605,2.623331,10.000000],
[-8.957742,2.081682,10.000000],
[-9.133144,1.524052,10.000000],
[-9.273627,0.952556,10.000000],
[-9.378138,0.369392,10.000000],
[-9.445763,-0.223160,10.000000],
[-9.475736,-0.822755,10.000000],
[-9.467440,-1.426987,10.000000],
[-9.420410,-2.033401,10.000000],
[-9.334342,-2.639501,10.000000],
[-9.209094,-3.242762,10.000000],
[-9.044685,-3.840642,10.000000],
[-8.841302,-4.430587,10.000000],
[-8.599299,-5.010050,10.000000],
[-8.319196,-5.576492,10.000000],
[-8.001681,-6.127403,10.000000],
[-7.647607,-6.660307,10.000000],
[-7.257992,-7.172774,10.000000],
[-6.834016,-7.662432,10.000000],
[-6.377014,-8.126976,10.000000],
[-5.888481,-8.564181,10.000000],
[-5.370058,-8.971911,10.000000],
[-4.823530,-9.348128,10.000000],
[-4.250824,-9.690903,10.000000],
[-3.653995,-9.998426,10.000000],
[-3.035225,-10.269014,10.000000],
[-2.396812,-10.501119,10.000000],
[-1.741161,-10.693338,10.000000],
[-1.070776,-10.844418,10.000000],
[-0.388253,-10.953264,10.000000],
[0.303735,-11.018947,10.000000],
[1.002446,-11.040706,10.000000],
[1.705078,-11.017957,10.000000],
[2.408784,-10.950295,10.000000],
[3.110680,-10.837496,10.000000],
[3.807861,-10.679523,10.000000],
[4.497408,-10.476530,10.000000],
[5.176404,-10.228854,10.000000],
[5.841944,-9.937026,10.000000],
[6.491150,-9.601766,10.000000],
[7.121178,-9.223981,10.000000],
[7.729239,-8.804764,10.000000],
[8.312603,-8.345392,10.000000],
[8.868614,-7.847324,10.000000],
[9.394704,-7.312192,10.000000],
[9.888403,-6.741799,10.000000],
[10.347347,-6.138113,10.000000],
[10.769297,-5.503262,10.000000],
[11.152140,-4.839521,10.000000],
[11.493907,-4.149310,10.000000],
[11.792778,-3.435183,10.000000],
[12.047092,-2.699817,10.000000],
[12.255358,-1.946004,10.000000],
[12.416258,-1.176641,10.000000],
[12.528660,-0.394716,10.000000],
[12.591618,0.396700,10.000000],
[12.604383,1.194469,10.000000],
[12.566408,1.995395,10.000000],
[12.477346,2.796239,10.000000],
[12.337060,3.593730,10.000000],
[12.145623,4.384580,10.000000],
[11.903321,5.165499,10.000000],
[11.610648,5.933204,10.000000],
[11.268315,6.684437,10.000000],
[10.877243,7.415979,10.000000],
[10.438560,8.124657,10.000000],
[9.953604,8.807369,10.000000],
[9.423913,9.461087,10.000000],
[8.851225,10.082875,10.000000],
[8.237471,10.669902,10.000000],
[7.584767,11.219455,10.000000],
[6.895410,11.728949,10.000000],
[6.171867,12.195941,10.000000],
[5.416768,12.618141,10.000000],
[4.632898,12.993420,10.000000],
[3.823182,13.319827,10.000000],
[2.990681,13.595590,10.000000],
[2.138572,13.819133,10.000000],
[1.270144,13.989076,10.000000],
[0.388781,14.104252,10.000000],
[-0.502051,14.163703,10.000000],
[-1.398817,14.166696,10.000000],
[-2.297927,14.112719,10.000000],
[-3.195749,14.001492,10.000000],
[-4.088627,13.832966,10.000000],
[-4.972893,13.607325,10.000000],
[-5.844883,13.324991,10.000000],
[-6.700952,12.986621,10.000000],
[-7.537491,12.593104,10.000000],
[-8.350937,12.145566,10.000000],
[-9.137795,11.645362,10.000000],
[-9.894648,11.094073,10.000000],
[-10.618174,10.493503,10.000000],
[-11.305159,9.845671,10.000000],
[-11.952511,9.152809,10.000000],
[-12.557278,8.417346,10.000000],
[-13.116653,7.641911,10.000000],
[-13.627995,6.829313,10.000000],
[-14.088836,5.982538,10.000000],
[-14.496896,5.104735,10.000000],
[-14.850090,4.199205,10.000000],
[-15.146541,3.269389,10.000000],
[-15.384590,2.318854,10.000000],
[-15.562799,1.351280,10.000000],
[-15.679967,0.370445,10.000000],
[-15.735130,-0.619786,10.000000],
[-15.727570,-1.615483,10.000000],
[-15.656819,-2.612661,10.000000],
[-15.522662,-3.607298,10.000000],
[-15.325142,-4.595352,10.000000],
[-15.064560,-5.572775,10.000000],
[-14.741475,-6.535531,10.000000],
[-14.356706,-7.479616,10.000000],
[-13.911330,-8.401066,10.000000],
[-13.406677,-9.295983,10.000000],
[-12.844330,-10.160546,10.000000],
[-12.226118,-10.991027,10.000000],
[-11.554111,-11.783813,10.000000],
[-10.830615,-12.535411,10.000000],
[-10.058160,-13.242474,10.000000],
[-9.239496,-13.901809,10.000000],
[-8.377580,-14.510395,10.000000],
[-7.475569,-15.065392,10.000000],
[-6.536803,-15.564160,10.000000],
[-5.564799,-16.004266,10.000000],
[-4.563232,-16.383497,10.000000],
[-3.535927,-16.699874,10.000000],
[-2.486839,-16.951656,10.000000],
[-1.420042,-17.137353,10.000000],
[-0.339709,-17.255732,10.000000],
[0.749900,-17.305825,10.000000],
[1.844458,-17.286934,10.000000],
[2.939584,-17.198635,10.000000],
[4.030868,-17.040785,10.000000],
[5.113882,-16.813520,10.000000],
[6.184199,-16.517259,10.000000],
[7.237413,-16.152705,10.000000],
[8.269159,-15.720841,10.000000],
[9.275124,-15.222930,10.000000],
[10.251074,-14.660515,10.000000],
[11.192863,-14.035406,10.000000],
[12.096457,-13.349684,10.000000],
[12.957949,-12.605687,10.000000],
[13.773575,-11.806008,10.000000],
[14.539731,-10.953482,10.000000],
[15.252989,-10.051176,10.000000],
[15.910112,-9.102382,10.000000],
[16.508067,-8.110602,10.000000],
[17.044043,-7.079535,10.000000],
[17.515459,-6.013065,10.000000],
[17.919977,-4.915244,10.000000],
[18.255516,-3.790280,10.000000],
[18.520259,-2.642518,10.000000],
[18.712665,-1.476425,10.000000],
[18.831473,-0.296570,10.000000],
[18.875715,0.892390,10.000000],
[18.844714,2.085732,10.000000],
[18.738097,3.278684,10.000000],
[18.555790,4.466442,10.000000],
[18.298030,5.644195,10.000000],
[17.965355,6.807138,10.000000],
[17.558615,7.950498,10.000000],
[17.078959,9.069547,10.000000],
[16.527844,10.159628,10.000000],
[15.907020,11.216167,10.000000],
[15.218534,12.234700,10.000000],
[14.464717,13.210887,10.000000],
[13.648181,14.140530,10.000000],
[12.771805,15.019594,10.000000],
[11.838731,15.844223,10.000000],
[10.852347,16.610754,10.000000],
[9.816281,17.315739,10.000000],
[8.734381,17.955954,10.000000],
[7.610707,18.528419,10.000000],
[6.449510,19.030407,10.000000],
[5.255222,19.459459,10.000000],
[4.032435,19.813395,10.000000],
[2.785882,20.090327,10.000000],
[1.520425,20.288662,10.000000],
[0.241029,20.407118,10.000000],
[-1.047252,20.444727,10.000000],
[-2.339299,20.400838,10.000000],
[-3.629946,20.275130,10.000000],
[-4.914001,20.067606,10.000000],
[-6.186268,19.778601,10.000000],
[-7.441567,19.408780,10.000000],
[-8.674755,18.959138,10.000000],
[-9.880746,18.430998,10.000000],
[-11.054536,17.826008,10.000000],
[-12.191220,17.146134,10.000000],
[-13.286012,16.393657,10.000000],
[-14.334267,15.571165,10.000000],
[-15.331503,14.681541,10.000000],
[-16.273413,13.727958,10.000000],
[-17.155891,12.713864,10.000000],
[-17.975043,11.642970,10.000000],
[-18.727212,10.519241,10.000000],
[-19.408986,9.346875,10.000000],
[-20.017218,8.130292,10.000000],
[-20.549039,6.874113,10.000000],
[-21.001872,5.583149,10.000000],
[-21.373440,4.262377,10.000000],
[-21.661786,2.916921,10.000000],
[-21.865272,1.552037,10.000000],
[-21.982593,0.173087,10.000000],
[-22.012787,-1.214479,10.000000],
[-21.955234,-2.605147,10.000000],
[-21.809664,-3.993356,10.000000],
[-21.576162,-5.373527,10.000000],
[-21.255164,-6.740079,10.000000],
[-20.847465,-8.087458,10.000000],
[-20.354209,-9.410151,10.000000],
[-19.776893,-10.702719,10.000000],
[-19.117361,-11.959811,10.000000],
[-18.377797,-13.176188,10.000000],
[-17.560720,-14.346750,10.000000],
[-16.668974,-15.466548,10.000000],
[-15.705719,-16.530813,10.000000],
[-14.674421,-17.534974,10.000000],
[-13.578838,-18.474675,10.000000],
[-12.423006,-19.345795,10.000000],
[-11.211228,-20.144468,10.000000],
[-9.948053,-20.867097,10.000000],
[-8.638263,-21.510373,10.000000],
[-7.286851,-22.071287,10.000000],
[-5.899007,-22.547144,10.000000],
[-4.480093,-22.935579,10.000000],
[-3.035627,-23.234564,10.000000],
[-1.571258,-23.442420,10.000000],
[-0.092744,-23.557826,10.000000],
[1.394068,-23.579824,10.000000],
[2.883267,-23.507828,10.000000],
[4.368901,-23.341628,10.000000],
[5.845001,-23.081387,10.000000],
[7.305605,-22.727651,10.000000],
[8.744782,-22.281342,10.000000],
[10.156657,-21.743761,10.000000],
[11.535431,-21.116580,10.000000],
[12.875411,-20.401842,10.000000],
[14.171030,-19.601951,10.000000],
[15.416867,-18.719666,10.000000],
[16.607677,-17.758091,10.000000],
[17.738408,-16.720665,10.000000],
[18.804221,-15.611148,10.000000],
[19.800516,-14.433611,10.000000],
[20.722946,-13.192417,10.000000],
[21.567441,-11.892208,10.000000],
[22.330221,-10.537885,10.000000],
[23.007815,-9.134594,10.000000],
[23.597080,-7.687702,10.000000],
[24.095206,-6.202778,10.000000],
[24.499740,-4.685572,10.000000],
[24.808588,-3.141992,10.000000],
[25.020034,-1.578083,10.000000],
[25.132741,-0.000000,10.000000]
];
// construct tubular polyhedron following curve of datapoints
path =
    [ for (i=[start:step:end])
       scale * points[i] ];
path_transforms =
    construct_transform_path(path);

difference() {
        cube([80,80,20], center=true);
        cube([76,80,16], center=true);
        //cylinder(d=80, h=.8, center=false);
        // The '#' operator highlights the object
        #sweep(shape(), path_transforms,false);
    }
